/*
File names: Assignment_3_part_a.cpp,
Developer: Siddhanth Sabharwal
Program Purpose: This program is a dynamic array implementation for large matrices.
It also has the ability to time the runs.
Program History:
Date       Version  ID    Description
1/23/2015  1.0      1000  Initial Creation
*/

#include<iostream>
#include <iomanip>
#include <time.h>
using namespace std;

#define MAT_SIZE 100
typedef float* DynMat[MAT_SIZE];

void matMultDyn(const DynMat & matA, const DynMat & matB, DynMat & matC, int size);
void matShowDyn(const DynMat & matA, int start, int size);

int main(){
    int r, c;
    clock_t startTime, stopTime;
    double randFrac;
    int randRow, randCol, smallPercent;
    // non-sparse dynamic matrix
    DynMat matDyn, matDynAns;

    // allocate rows and initialize to 0
    for (r = 0; r < MAT_SIZE; r++){
        matDyn[r] = new float[MAT_SIZE];
        matDynAns[r] = new float[MAT_SIZE];
        for (c = 0; c < MAT_SIZE; c++){
            matDyn[r][c] = 0;
            matDynAns[r][c] = 0;
        }
    }

    // generate small% non-default values bet .1 and 1
    smallPercent = MAT_SIZE / 20. * MAT_SIZE;  // div by 20. means 5%, of course
    for (r = 0; r < smallPercent; r++){
        randFrac = (rand() % 100 + 1) / 100.;
        randRow = rand() % (MAT_SIZE);
        randCol = rand() % (MAT_SIZE);
        matDyn[randRow][randCol] = randFrac;
    }

    // 10x10 submatrix in lower right
    matShowDyn(matDyn, MAT_SIZE - 10, 10);

    startTime = clock();  // ------------------ start
    matMultDyn(matDyn, matDyn, matDynAns, MAT_SIZE);
    stopTime = clock();  // ---------------------- stop

    matShowDyn(matDynAns, MAT_SIZE - 10, 10);
    cout << "\nSize = " << MAT_SIZE << " Dyn Array Mult Elapsed Time: "
        << (double)(stopTime - startTime) / (double)CLOCKS_PER_SEC
        << " seconds." << endl << endl;

    // clean up
    for (r = 0; r < MAT_SIZE; r++){
        delete [] matDyn[r];
        delete [] matDynAns[r];
        matDyn[r] = NULL;
        matDynAns[r] = NULL;
    }

    cout << endl;
}

void matMultDyn(const DynMat & matA, const DynMat & matB, DynMat & matC, int size){
    for (int r = 0; r < size; r++){
        for (int c = 0; c < size; c++){
            matC[r][c] = 0;
            for (int rowMover = 0; rowMover < size; rowMover++){
                matC[r][c] = matC[r][c] + matA[r][rowMover] * matB[rowMover][c];
            }
        }
    }
}

void matShowDyn(const DynMat & matA, int start, int size){
    for (int i = start; i <= (start + size - 1); i++){
        for (int j = start; j <= (start + size - 1); j++){
            cout << setprecision(2) << fixed << matA[i][j] << "  ";
        }
        cout << endl;
    }
    cout << endl;
}

/* ---------------------------------------------QUESTIONS---------------------

1. The smallest M that gave me a non-zero time was 99.
This an be seen from the last line of my output:
Size = 99 Dyn Array Mult Elapsed Time: 0.01 seconds.

2. When I doubled M, I expected the time to increase by a factor of 8.
When I tripled M, I expected the time to increase by a factor of 27.
When I quadrupled M, I expected the time to increase by a factor of 64.
Essentially, I predicted T(M) = O(M^3). This would be the upper bound.
Here is a table of my results, along with some runs below the questions:

M (size of matrix)          Time (seconds)
100                         0.01
200                         0.04
300                         0.15
400                         0.36
600                         1.47

3. I let my program run for M = 10000, and it took 28419.51 seconds,
approximately 7 hours and 53 minutes. I'm sure c++ will continue running for any 
amount of M till your computer runs out of memory. After a little trial and error,
my program didn't run for M > approximately 16250. It gives me a run-time error.

4. My data didn't agree too well with the prediction of T(M) = O(M^3), but that
is because the Big-Oh is an upperbound. My matMultDyn method has 3 for loops that
go from 0 to M, so the inner most nested loop is going to run M^3 times regardless.
For this reason, there is also no difference between the upper and lower bound,
since the amount of times the loop runs only depends on M.

----------------------------------------------------------------------------*/

/*----------------------------------------------------RUNS--------------------

0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.93  0.00  0.00  0.00  0.00  0.00  0.45  0.00  0.00
0.00  0.95  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.31  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.14  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.13  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00


Size = 30 Dyn Array Mult Elapsed Time: 0.00 seconds.


Press any key to continue . . .


0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.82  0.00  0.00  0.00
0.00  0.84  0.92  0.00  0.00  0.00  0.00  0.94  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.81  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.35  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.22
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.66  0.16
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.37  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.37  0.00  0.00  0.00  0.00  0.00  0.23  0.00  0.09  0.83
0.12  0.13  0.00  0.65  0.00  0.00  0.00  0.00  0.00  0.00


Size = 50 Dyn Array Mult Elapsed Time: 0.00 seconds.


Press any key to continue . . .


0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.83  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.91  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.94  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.81  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.78  0.00  0.00
0.00  0.00  0.00  0.05  0.00  0.54  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.69  0.00  0.00  0.00  0.74  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.04  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.39  0.00  0.06  0.00  0.00  0.75  0.00
0.20  0.00  0.00  0.00  0.00  0.00  0.12  0.00  0.15  0.00
0.12  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00


Size = 100 Dyn Array Mult Elapsed Time: 0.01 seconds.


Press any key to continue . . .


0.00  0.94  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.56  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.74  0.00  0.00  0.00  0.22  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.81  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.60
0.93  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

0.53  0.00  0.00  0.21  0.00  0.57  0.00  0.00  0.33  0.00
0.67  0.53  0.00  0.00  0.00  0.00  0.00  0.00  0.14  0.02
0.77  0.00  1.38  0.00  0.00  0.54  0.00  0.00  0.00  0.14
0.09  0.00  0.61  0.40  0.69  0.00  0.00  0.00  0.34  0.01
0.00  0.00  0.38  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  1.24  0.00  0.23  0.00  0.00  0.00
0.75  0.00  0.00  0.00  0.00  0.61  0.87  0.00  0.00  0.00
0.00  0.03  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  1.54  0.25  0.37  0.00  0.00  0.12  0.00  0.00  0.00
0.59  0.00  0.00  0.00  0.00  0.62  0.00  0.47  0.00  0.00


Size = 200 Dyn Array Mult Elapsed Time: 0.04 seconds.


Press any key to continue . . .


0.00  0.66  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.56  0.22  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.91  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.17  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.70  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

1.36  0.15  0.00  0.37  0.89  0.00  0.11  0.27  0.25  0.00
0.12  0.42  0.48  0.00  0.46  0.35  0.00  0.50  0.41  0.61
0.08  0.00  1.04  0.00  0.00  0.96  0.30  0.02  0.00  0.00
1.19  0.00  0.00  0.09  0.62  0.00  0.00  0.00  0.04  0.00
0.32  0.00  0.00  0.51  0.08  0.00  0.00  0.00  0.00  0.07
0.09  0.00  0.18  0.13  1.18  0.40  0.00  0.00  0.00  0.39
0.01  1.50  0.44  0.00  0.00  0.00  0.13  0.35  0.22  0.38
0.17  0.11  1.37  0.00  0.71  0.08  0.15  0.00  0.00  0.75
0.00  0.11  0.00  0.25  0.17  0.18  0.00  0.00  0.76  0.74
0.49  0.45  0.52  0.00  0.85  0.39  0.00  0.01  0.00  0.31


Size = 300 Dyn Array Mult Elapsed Time: 0.15 seconds.


Press any key to continue . . .


0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.22  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.46
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.93  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

0.32  0.19  0.00  0.68  0.94  0.73  0.03  0.32  0.00  0.11
0.48  0.20  0.32  0.07  0.00  0.00  0.06  0.57  1.47  0.94
0.05  0.00  0.17  0.36  0.95  0.87  0.58  0.00  0.42  0.00
0.07  0.09  0.00  0.26  0.00  0.00  0.02  0.26  0.08  0.00
0.31  0.00  0.54  0.23  0.00  0.27  0.00  0.00  0.41  0.00
0.00  0.28  0.25  0.00  0.40  0.46  0.00  0.33  0.00  0.00
0.32  0.63  0.25  0.00  1.31  1.05  0.00  0.49  0.38  0.00
0.00  0.25  0.54  0.63  0.13  0.36  0.02  0.06  0.64  0.17
0.00  0.25  0.04  0.00  0.00  0.99  0.00  0.22  0.10  0.55
0.80  0.70  0.17  0.75  0.00  1.01  0.89  0.66  0.54  0.34


Size = 400 Dyn Array Mult Elapsed Time: 0.36 seconds.


Press any key to continue . . .

0.00  0.00  0.00  0.13  0.00  0.00  0.00  0.00  0.00  0.00
0.56  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.77  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.03  0.00

0.61  0.68  0.25  0.05  0.50  0.21  0.03  0.17  0.58  0.59
0.00  0.27  0.00  0.07  0.00  0.00  0.03  0.00  0.91  0.00
1.34  1.40  1.01  0.23  0.00  0.00  0.00  0.00  0.19  0.00
0.00  0.53  0.08  0.88  1.41  0.15  0.63  0.72  0.97  0.38
0.34  0.05  0.38  0.08  0.29  0.13  0.01  0.00  0.20  0.00
0.00  0.26  0.11  0.02  1.01  0.72  0.00  0.51  0.13  0.92
0.75  0.18  1.31  1.50  0.00  0.12  1.11  0.61  0.00  0.38
0.00  0.00  0.28  0.24  0.61  0.48  0.48  1.02  0.00  0.33
0.00  0.23  0.00  0.27  1.18  0.31  0.09  0.82  0.00  0.00
0.13  0.00  0.25  0.00  0.00  0.57  0.62  1.01  0.64  0.27


Size = 600 Dyn Array Mult Elapsed Time: 1.47 seconds.


Press any key to continue . . .


0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00

Size = 10000 Dyn Array Mult Elapsed Time: 28419.51 seconds.


Press any key to continue . . .
---------------------------------------------------------------------------------------------------------------*/